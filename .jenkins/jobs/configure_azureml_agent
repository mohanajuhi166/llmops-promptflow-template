@Library('shared-library@feature/add-shared-library') _
pipeline {
    agent any

    parameters {
        string(name: 'env_name', defaultValue: 'pr', description: 'Execution Environment')
        string(name: 'flow_type', defaultValue: 'named_entity_recognition')
    }

    options {
        buildDiscarder(logRotator(numToKeepStr: '10'))
    }

    stages {
        stage('Prepare build environment') {
            steps {
                installRequirements('execute_job_requirements')
                withCredentials([azureServicePrincipal('AZURE_CREDENTIALS')]) {
                    withPythonEnv('/usr/bin/python3.9') {
                        sh """
                        python --version
                        pip list
                        az version
                        """
                    }
                }
            }
        }
    }
}

